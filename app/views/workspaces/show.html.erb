<h1><%= @workspace.name %></h1>
<p><%= @workspace.description %></p>

<h2>Your Profile in this Workspace</h2>
<p>Profile Name: <%= @user_workspace.profile_name %></p>
<p>Status: <%= @user_workspace.profile_status %></p>
<p>Description: <%= @user_workspace.profile_description %></p>

<h2>Invite a User</h2>

<%= form_with(model: [@workspace, @invite], local: true) do |form| %>
  <div class="field">
    <%= form.label :email, "User Email" %>
    <%= form.email_field :email %>
  </div>

  <div class="field">
    <%= form.label :invite_type, "Invite Type" %>
    <%= form.select :invite_type, options_for_select([['Private', 'private'], ['Public', 'public']]) %>
  </div>

  <div class="actions">
    <%= form.submit "Send Invite" %>
  </div>
<% end %>

<h2>Members in This Workspace</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @workspace.user_workspaces.each do |user_workspace| %>
      <tr>
        <td><%= user_workspace.profile_name %></td>
        <td><%= user_workspace.user.email %></td>
        <td><%= user_workspace.role %></td>
        <td>
          <% if user_workspace.user != current_user %>
            <%= link_to 'Remove', workspace_user_workspace_path(@workspace, user_id: user_workspace.user.id), method: :delete, data: { confirm: 'Are you sure?', turbo_method: :delete }, class: 'btn btn-danger' %>
            <%= link_to 'Edit Profile', edit_workspace_user_workspace_path(@workspace, user_id: user_workspace.user.id), class: 'btn btn-primary' %>
          <% else %>
            <%= link_to 'Edit Profile', edit_workspace_user_workspace_path(@workspace, user_id: user_workspace.user.id), class: 'btn btn-primary' %>
            <span class="btn btn-secondary disabled">You</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Chats</h2>
<p><%= link_to 'View All Chats in This Workspace', workspace_chats_path(@workspace), class: 'btn btn-secondary' %></p>
